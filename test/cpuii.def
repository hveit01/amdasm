TITLE CPU II DEFINITIONS

;ADVANCE MICRO DEVICES
; AM2903 AND AM2904 DEFINITION FILE FOR CPU II
;
; REV. OCTOBER 17, 1978

WORD    90

; extension for -omg format
COLS    16,4,1,1,1,1,2,4,6,1,4,4,4,4,4,3,4,1,1,4,4,1,1,1,1,12


;EQUATES

MEM:    EQU H#F
SPF:    EQU H#0
OFF:    EQU B#1


;2903 DESTINATION MODIFIERS

ADR:    EQU H#0
LDR:    EQU H#1
ADRQ:   EQU H#2
LDRQ:   EQU H#3
RPT:    EQU H#4
LDQP:   EQU H#5
QPT:    EQU H#6
RQPT:   EQU H#7
AUR:    EQU H#8
LUR:    EQU H#9
AURQ:   EQU H#A
LURQ:   EQU H#B
YBUS:   EQU H#C
LUQ:    EQU H#D
SINX:   EQU H#E


;CONSTANTS

R0:     EQU H#0
R1:     EQU H#1
R2:     EQU H#2
R3:     EQU H#3
R4:     EQU H#4
R5:     EQU H#5
R6:     EQU H#6
R7:     EQU H#7
R8:     EQU H#8
R9:     EQU H#9
R10:    EQU H#A
R11:    EQU H#B
R12:    EQU H#C
R13:    EQU H#D
R14:    EQU H#E
R15:    EQU H#F


;AM2903 SOURCE MODIFIERS

RADB:   EQU 3B#001
RAQ:    EQU 3B#010
DARB:   EQU 3B#100
DADP:   EQU 3B#101
DAQ:    EQU 3B#110

;I/O
IOIN:   EQU 12H#01
BIN:    EQU 12H#10
BOUT:   EQU 12H#08
LMAR:   EQU 12H#10
YREG:   EQU 12H#02
AOUT:   EQU 12H#40
IOUT:   EQU 12H#04

;CARRY SELECT

ONE:    EQU 2B#01
CZ:     EQU 2B#10

;SUB DEFINITIONS


SUB0:   SUB 36X,1B#0,4VX,4VX,4VX
SUB1:   SUB 36X,1B#0,4VX,4VX,4VX,4VH#F
SUB2:   SUB 36X,1B#0,4VX,4VX,4X,4VH#F
SUB3:   SUB 3VB#000,16X,1B#0,13X
SUB4:   SUB 36X,1B#0,12X
SUB5:   SUB 44X,1B#0,15X
SUB6:   SUB 44X,1B#0,15X
SUB7:   SUB 26X
SUB8:   SUB 36X,1B#0,4VX,8X,4VH#F
SUB9:   SUB 36X,1B#0,4VX,4X,4VX,4VH#F
SUB10:  SUB 36X,1B#0,4VX,4VX,4X
SUB11:  SUB 24X,2VB#00,34X,4B#0000,1B#1,5X
SUB12:  SUB 77X,1B#1,12VXH#0%
SUB13:  SUB SPF,3VB#00,16X,1B#0,13X
SUB14:  SUB 24X,2VB#00,34X,4B#0000,2B#10
SUB15:  SUB 23X,1B#0,6X
SUB16:  SUB SPF,3B#000,16X,1VB#0,13X
SUB17:  SUB 54X
SUB18:  SUB 22X,1B#0,7X
SUB19:  SUB 16X,1B#0,13X
SUB20:  SUB 1X,1VB#0,14X
SUB21:  SUB 30X,H#B,20X




;CCU CCNTRCL
ACK:    DEF 66X,H#9,20X
OBF:    DEF 66X,H#A,20X
CNT:    DEF 66X,H#F,20X
GRD:    DEF 66X,H#0,20X
JZ:     DEF SUB11,H#0,SUB20
CJS:    DEF SUB11,H#1,SUB20
JMAP:   DEF SUB11,H#2,SUB20
CJP:    DEF SUB11,H#3,SUB20
PUSH:   DEF SUB11,H#4,SUB20
JSRP:   DEF SUB11,H#5,SUB20
CJV:    DEF SUB11,H#6,SUB20
JRP:    DEF SUB11,H#7,SUB20
RFCT:   DEF SUB11,H#8,SUB20
RPCT:   DEF SUB11,H#9,SUB20
CRTN:   DEF SUB11,H#A,SUB20
CJPP:   DEF SUB11,H#B,SUB20
LDCT:   DEF SUB11,H#C,SUB20
LOOP:   DEF SUB11,H#D,SUB20
CONT:   DEF SUB11,H#E,SUB20
JP:     DEF SUB11,H#F,SUB20
JSR:    DEF SUB14,H#01,SUB20
RTN:    DEF SUB14,H#0A,SUB20

;SHARED CONTROL FIELD

GOTO:   DEF SUB12
COUNT:  DEF SUB12
PUT:    DEF 77X,1B#0,12VXH#0%

;POLARITY CONTROL
T:      DEF 65X,1B#1,24X
F:      DEF 65X,1B#0,24X

;2903 CONTROL/FUNCTIONS

IN:     DEF 36X,1B#1,H#F,8X,H#F,H#0,19X,1B#0,13X
OUT:    DEF 36X,1B#0,8X,H#F,H#C,H#6,SUB3
YOFF:   DEF 36X,1B#1,53X
HIGH:   DEF SUB8,H#0,3B#010,SUB19
SRS:    DEF SUB1,H#1,SUB3
SSR:    DEF SUB1,H#2,SUB3
ADD:    DEF SUB1,H#3,SUB3
PAS:    DEF SUB2,H#4,SUB3
COMS:   DEF SUB2,H#5,SUB3
PAR:    DEF SUB9,H#6,SUB3
COMR:   DEF SUB9,H#7,SUB3
LOW:    DEF SUB8,H#8,3X,SUB19
CRAS:   DEF SUB1,H#9,SUB3
XNRS:   DEF SUB1,H#A,SUB3
XOR:    DEF SUB1,H#B,SUB3
AND:    DEF SUB1,H#C,SUB3
NOR:    DEF SUB1,H#D,SUB3
NAND:   DEF SUB1,H#E,SUB3
OR:     DEF SUB1,H#F,SUB3

;2903 SPECIAL FUNCTIONS
UMUL:   DEF SUB0,H#0,SUB16
TCM:    DEF SUB0,H#2,SUB16
SMTC:   DEF SUB10,H#5,SUB16
TCMC:   DEF SUB0,H#6,SUB16
SLN:    DEF SUB10,H#8,SUB16
DLN:    DEF SUB0,H#A,SUB16
TDIV:   DEF SUB0,H#C,SUB16
TDC:    DEF SUB0,H#E,SUB16
INC:    DEF SUB10,H#4,SUB16
SDQP:   DEF SUB4,H#5,4X,SUB3
SUQP:   DEF SUB4,H#D,4X,SUB3
LQPT:   DEF 36X,1B#0,8X,4VX,H#6,H#6,SUB3
RMOV:   DEF SUB2,H#4,SUB3
QMOV:   DEF 36X,1B#0,4VX,8X,MEM,H#4,3B#010,SUB19
SDRL:   DEF SUB10,H#1,H#4,SUB3
SURL:   DEF SUB10,H#9,H#4,SUB3
SDRQ:   DEF SUB10,H#3,H#4,SUB3  ; MISSING IN MICK&BRICK BOOK


;2904 SHIFT CONTROL

SDDH:   DEF SUB7,H#3,SUB6
SDUH:   DEF SUB7,H#7,SUB5
SDDL:   DEF SUB7,H#6,SUB6
SDUL:   DEF SUB7,H#6,SUB5
RDD:    DEF SUB7,H#F,SUB6
RDU:    DEF SUB7,H#F,SUB5
SSXO:   DEF SUB7,H#E,SUB6
RSD:    DEF SUB7,H#A,SUB6
RSU:    DEF SUB7,H#A,SUB5
SUL:    DEF SUB7,H#2,SUB5
SUH:    DEF SUB7,H#3,SUB5
SDL:    DEF SUB7,H#0,SUB6
SDH:    DEF SUB7,H#1,SUB6
SDMS:   DEF SUB7,H#5,SUB6
SMS:    DEF SUB7,H#2,SUB6
SDDC:   DEF SUB7,H#7,SUB6
SDUC:   DEF SUB7,H#4,SUB5

;2904 MICRO INSTRUCTION CODES

RSTI:   DEF 30X,6B#000011,SUB17
SWAP:   DEF 30X,6B#000010,SUB17
SHLD:   EQU 1B#1


;2904 MACHINE INSTRUCTION CODES

LMA:    DEF SUB15,6B#000000,SUB17
RSTA:   DEF SUB15,6B#000011,SUB17
SHOLD:  DEF 23X,1B#0,66X


;2904 MICRO STATUS SELECT

MIZ:    DEF SUB18,6B#010100,SUB21
MIO:    DEF SUB18,6B#010110,SUB21
MIC:    DEF SUB18,6B#011010,SUB21
MIS:    DEF SUB18,6B#011110,SUB21

;2904 MICRO STATUS SELECT

MAZ:    DEF SUB18,6B#100100,SUB21
MAO:    DEF SUB18,6B#100110,SUB21
MAC:    DEF SUB18,6B#101010,SUB21
MAS:    DEF SUB18,6B#101110,SUB21

;DEVICE DISABLE

ALUOFF: DEF 76X,1B#1,13X
ALLOFF: DEF 74X,3B#111,13X

;LOAD CONSTANT

CONST:  DEF 16VXH#0%,4X,1B#0,69X

;BCD STATUS REGISTER CONTROL
ENR:    DEF 16X,1B#0,73X
CLSR2:  DEF 17X,1B#0,72X
ENSR1:  DEF 18X,1B#1,71X
CZERO:  DEF 19X,1B#0,70X





END